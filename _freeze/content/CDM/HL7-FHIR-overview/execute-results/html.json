{
  "hash": "b654867ffe6a85bddd87209633ea33b9",
  "result": {
    "engine": "jupyter",
    "markdown": "# HL7 & FHIR\n\n## HL7 Overview\n\nHL7 (Health Level Seven) refers to a set of international standards for the exchange of clinical and administrative data between healthcare systems. The \"Level Seven\" refers to the application layer in the OSI model.\n\n### Key HL7 Standards:\n\n**HL7 v2.x** - The traditional messaging standard using pipe-delimited format\n**HL7 v3** - XML-based standard (less widely adopted)\n**HL7 FHIR** - The modern RESTful API-based standard\n\n## FHIR (Fast Healthcare Interoperability Resources)\n\nFHIR is the latest standard from HL7, designed to be:\n\n- **Web-based**: Uses modern web technologies (REST, JSON, XML)\n- **Resource-oriented**: Data organized as modular resources\n- **Developer-friendly**: Easy to implement compared to older standards\n\n### Core FHIR Concepts:\n\n1. **Resources** - Basic building blocks (Patient, Observation, DiagnosticReport, etc.)\n2. **References** - Links between resources\n3. **Extensions** - Custom data elements\n4. **Profiles** - Constraints on resources for specific use cases\n\n### Radiology-Specific FHIR Resources\n\nFor radiology data science, these resources are particularly important:\n\n- **ImagingStudy** - Represents a DICOM study\n- **DiagnosticReport** - Radiology reports\n- **Observation** - Findings and measurements\n- **ServiceRequest** - Imaging orders\n- **Patient** - Patient demographics\n- **Practitioner** - Radiologists and referring physicians\n\n### Practical Example\n\nLet me show you a simple radiology workflow in FHIR:## Key Points for Radiology Data Science\n\n::: {#ae2caf20 .cell execution_count=1}\n``` {.python .cell-code}\nimport json\nfrom datetime import datetime\n\n# Example 1: Patient Resource\npatient = {\n    \"resourceType\": \"Patient\",\n    \"id\": \"patient-001\",\n    \"identifier\": [{\n        \"system\": \"http://hospital.example.org/patients\",\n        \"value\": \"12345\"\n    }],\n    \"name\": [{\n        \"use\": \"official\",\n        \"family\": \"Smith\",\n        \"given\": [\"John\", \"A.\"]\n    }],\n    \"gender\": \"male\",\n    \"birthDate\": \"1985-03-15\"\n}\n\n# Example 2: ServiceRequest (Imaging Order)\nimaging_order = {\n    \"resourceType\": \"ServiceRequest\",\n    \"id\": \"order-001\",\n    \"status\": \"active\",\n    \"intent\": \"order\",\n    \"code\": {\n        \"coding\": [{\n            \"system\": \"http://loinc.org\",\n            \"code\": \"36643-5\",\n            \"display\": \"Chest X-ray PA and lateral\"\n        }]\n    },\n    \"subject\": {\n        \"reference\": \"Patient/patient-001\"\n    },\n    \"authoredOn\": \"2024-01-15T09:00:00Z\",\n    \"requester\": {\n        \"reference\": \"Practitioner/dr-jones\"\n    },\n    \"reasonCode\": [{\n        \"text\": \"Persistent cough for 2 weeks\"\n    }]\n}\n\n# Example 3: ImagingStudy Resource\nimaging_study = {\n    \"resourceType\": \"ImagingStudy\",\n    \"id\": \"study-001\",\n    \"status\": \"available\",\n    \"subject\": {\n        \"reference\": \"Patient/patient-001\"\n    },\n    \"started\": \"2024-01-15T10:30:00Z\",\n    \"basedOn\": [{\n        \"reference\": \"ServiceRequest/order-001\"\n    }],\n    \"modality\": [{\n        \"system\": \"http://dicom.nema.org/resources/ontology/DCM\",\n        \"code\": \"CR\",\n        \"display\": \"Computed Radiography\"\n    }],\n    \"numberOfSeries\": 1,\n    \"numberOfInstances\": 2,\n    \"series\": [{\n        \"uid\": \"1.2.840.113619.2.55.3.123456.1\",\n        \"modality\": {\n            \"system\": \"http://dicom.nema.org/resources/ontology/DCM\",\n            \"code\": \"CR\"\n        },\n        \"numberOfInstances\": 2,\n        \"instance\": [\n            {\n                \"uid\": \"1.2.840.113619.2.55.3.123456.1.1\",\n                \"sopClass\": {\n                    \"system\": \"urn:ietf:rfc:3986\",\n                    \"code\": \"urn:oid:1.2.840.10008.5.1.4.1.1.1.1\"\n                },\n                \"title\": \"PA view\"\n            },\n            {\n                \"uid\": \"1.2.840.113619.2.55.3.123456.1.2\",\n                \"sopClass\": {\n                    \"system\": \"urn:ietf:rfc:3986\",\n                    \"code\": \"urn:oid:1.2.840.10008.5.1.4.1.1.1.1\"\n                },\n                \"title\": \"Lateral view\"\n            }\n        ]\n    }]\n}\n\n# Example 4: DiagnosticReport with Observations\ndiagnostic_report = {\n    \"resourceType\": \"DiagnosticReport\",\n    \"id\": \"report-001\",\n    \"status\": \"final\",\n    \"code\": {\n        \"coding\": [{\n            \"system\": \"http://loinc.org\",\n            \"code\": \"36643-5\",\n            \"display\": \"Chest X-ray PA and lateral\"\n        }]\n    },\n    \"subject\": {\n        \"reference\": \"Patient/patient-001\"\n    },\n    \"issued\": \"2024-01-15T14:00:00Z\",\n    \"performer\": [{\n        \"reference\": \"Practitioner/radiologist-001\"\n    }],\n    \"imagingStudy\": [{\n        \"reference\": \"ImagingStudy/study-001\"\n    }],\n    \"conclusion\": \"No acute cardiopulmonary abnormality. Small left pleural effusion.\",\n    \"result\": [\n        {\n            \"reference\": \"Observation/obs-001\"\n        },\n        {\n            \"reference\": \"Observation/obs-002\"\n        }\n    ]\n}\n\n# Example 5: Observation (Finding)\nobservation_pleural_effusion = {\n    \"resourceType\": \"Observation\",\n    \"id\": \"obs-001\",\n    \"status\": \"final\",\n    \"code\": {\n        \"coding\": [{\n            \"system\": \"http://snomed.info/sct\",\n            \"code\": \"60046008\",\n            \"display\": \"Pleural effusion\"\n        }]\n    },\n    \"subject\": {\n        \"reference\": \"Patient/patient-001\"\n    },\n    \"bodySite\": {\n        \"coding\": [{\n            \"system\": \"http://snomed.info/sct\",\n            \"code\": \"264231000\",\n            \"display\": \"Left lung\"\n        }]\n    },\n    \"valueCodeableConcept\": {\n        \"coding\": [{\n            \"system\": \"http://snomed.info/sct\",\n            \"code\": \"255507004\",\n            \"display\": \"Small\"\n        }]\n    }\n}\n\n# Example 6: Observation (Measurement)\nobservation_cardiothoracic_ratio = {\n    \"resourceType\": \"Observation\",\n    \"id\": \"obs-002\",\n    \"status\": \"final\",\n    \"code\": {\n        \"coding\": [{\n            \"system\": \"http://loinc.org\",\n            \"code\": \"81269-2\",\n            \"display\": \"Cardiothoracic ratio\"\n        }]\n    },\n    \"subject\": {\n        \"reference\": \"Patient/patient-001\"\n    },\n    \"valueQuantity\": {\n        \"value\": 0.45,\n        \"unit\": \"ratio\"\n    },\n    \"referenceRange\": [{\n        \"high\": {\n            \"value\": 0.5\n        },\n        \"text\": \"Normal < 0.5\"\n    }]\n}\n\n# Print examples in readable format\nprint(\"=== FHIR Radiology Workflow Example ===\\n\")\n\nresources = [\n    (\"1. Patient\", patient),\n    (\"2. Service Request (Order)\", imaging_order),\n    (\"3. Imaging Study\", imaging_study),\n    (\"4. Diagnostic Report\", diagnostic_report),\n    (\"5. Observation - Finding\", observation_pleural_effusion),\n    (\"6. Observation - Measurement\", observation_cardiothoracic_ratio)\n]\n\nfor title, resource in resources:\n    print(f\"\\n{title}:\")\n    print(json.dumps(resource, indent=2))\n    print(\"-\" * 50)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n=== FHIR Radiology Workflow Example ===\n\n\n1. Patient:\n{\n  \"resourceType\": \"Patient\",\n  \"id\": \"patient-001\",\n  \"identifier\": [\n    {\n      \"system\": \"http://hospital.example.org/patients\",\n      \"value\": \"12345\"\n    }\n  ],\n  \"name\": [\n    {\n      \"use\": \"official\",\n      \"family\": \"Smith\",\n      \"given\": [\n        \"John\",\n        \"A.\"\n      ]\n    }\n  ],\n  \"gender\": \"male\",\n  \"birthDate\": \"1985-03-15\"\n}\n--------------------------------------------------\n\n2. Service Request (Order):\n{\n  \"resourceType\": \"ServiceRequest\",\n  \"id\": \"order-001\",\n  \"status\": \"active\",\n  \"intent\": \"order\",\n  \"code\": {\n    \"coding\": [\n      {\n        \"system\": \"http://loinc.org\",\n        \"code\": \"36643-5\",\n        \"display\": \"Chest X-ray PA and lateral\"\n      }\n    ]\n  },\n  \"subject\": {\n    \"reference\": \"Patient/patient-001\"\n  },\n  \"authoredOn\": \"2024-01-15T09:00:00Z\",\n  \"requester\": {\n    \"reference\": \"Practitioner/dr-jones\"\n  },\n  \"reasonCode\": [\n    {\n      \"text\": \"Persistent cough for 2 weeks\"\n    }\n  ]\n}\n--------------------------------------------------\n\n3. Imaging Study:\n{\n  \"resourceType\": \"ImagingStudy\",\n  \"id\": \"study-001\",\n  \"status\": \"available\",\n  \"subject\": {\n    \"reference\": \"Patient/patient-001\"\n  },\n  \"started\": \"2024-01-15T10:30:00Z\",\n  \"basedOn\": [\n    {\n      \"reference\": \"ServiceRequest/order-001\"\n    }\n  ],\n  \"modality\": [\n    {\n      \"system\": \"http://dicom.nema.org/resources/ontology/DCM\",\n      \"code\": \"CR\",\n      \"display\": \"Computed Radiography\"\n    }\n  ],\n  \"numberOfSeries\": 1,\n  \"numberOfInstances\": 2,\n  \"series\": [\n    {\n      \"uid\": \"1.2.840.113619.2.55.3.123456.1\",\n      \"modality\": {\n        \"system\": \"http://dicom.nema.org/resources/ontology/DCM\",\n        \"code\": \"CR\"\n      },\n      \"numberOfInstances\": 2,\n      \"instance\": [\n        {\n          \"uid\": \"1.2.840.113619.2.55.3.123456.1.1\",\n          \"sopClass\": {\n            \"system\": \"urn:ietf:rfc:3986\",\n            \"code\": \"urn:oid:1.2.840.10008.5.1.4.1.1.1.1\"\n          },\n          \"title\": \"PA view\"\n        },\n        {\n          \"uid\": \"1.2.840.113619.2.55.3.123456.1.2\",\n          \"sopClass\": {\n            \"system\": \"urn:ietf:rfc:3986\",\n            \"code\": \"urn:oid:1.2.840.10008.5.1.4.1.1.1.1\"\n          },\n          \"title\": \"Lateral view\"\n        }\n      ]\n    }\n  ]\n}\n--------------------------------------------------\n\n4. Diagnostic Report:\n{\n  \"resourceType\": \"DiagnosticReport\",\n  \"id\": \"report-001\",\n  \"status\": \"final\",\n  \"code\": {\n    \"coding\": [\n      {\n        \"system\": \"http://loinc.org\",\n        \"code\": \"36643-5\",\n        \"display\": \"Chest X-ray PA and lateral\"\n      }\n    ]\n  },\n  \"subject\": {\n    \"reference\": \"Patient/patient-001\"\n  },\n  \"issued\": \"2024-01-15T14:00:00Z\",\n  \"performer\": [\n    {\n      \"reference\": \"Practitioner/radiologist-001\"\n    }\n  ],\n  \"imagingStudy\": [\n    {\n      \"reference\": \"ImagingStudy/study-001\"\n    }\n  ],\n  \"conclusion\": \"No acute cardiopulmonary abnormality. Small left pleural effusion.\",\n  \"result\": [\n    {\n      \"reference\": \"Observation/obs-001\"\n    },\n    {\n      \"reference\": \"Observation/obs-002\"\n    }\n  ]\n}\n--------------------------------------------------\n\n5. Observation - Finding:\n{\n  \"resourceType\": \"Observation\",\n  \"id\": \"obs-001\",\n  \"status\": \"final\",\n  \"code\": {\n    \"coding\": [\n      {\n        \"system\": \"http://snomed.info/sct\",\n        \"code\": \"60046008\",\n        \"display\": \"Pleural effusion\"\n      }\n    ]\n  },\n  \"subject\": {\n    \"reference\": \"Patient/patient-001\"\n  },\n  \"bodySite\": {\n    \"coding\": [\n      {\n        \"system\": \"http://snomed.info/sct\",\n        \"code\": \"264231000\",\n        \"display\": \"Left lung\"\n      }\n    ]\n  },\n  \"valueCodeableConcept\": {\n    \"coding\": [\n      {\n        \"system\": \"http://snomed.info/sct\",\n        \"code\": \"255507004\",\n        \"display\": \"Small\"\n      }\n    ]\n  }\n}\n--------------------------------------------------\n\n6. Observation - Measurement:\n{\n  \"resourceType\": \"Observation\",\n  \"id\": \"obs-002\",\n  \"status\": \"final\",\n  \"code\": {\n    \"coding\": [\n      {\n        \"system\": \"http://loinc.org\",\n        \"code\": \"81269-2\",\n        \"display\": \"Cardiothoracic ratio\"\n      }\n    ]\n  },\n  \"subject\": {\n    \"reference\": \"Patient/patient-001\"\n  },\n  \"valueQuantity\": {\n    \"value\": 0.45,\n    \"unit\": \"ratio\"\n  },\n  \"referenceRange\": [\n    {\n      \"high\": {\n        \"value\": 0.5\n      },\n      \"text\": \"Normal < 0.5\"\n    }\n  ]\n}\n--------------------------------------------------\n```\n:::\n:::\n\n\n#### 1. **DICOM to FHIR Mapping**\n\nFHIR ImagingStudy maps to DICOM hierarchy:\n\n- ImagingStudy → DICOM Study\n- Series → DICOM Series\n- Instance → DICOM Instance (individual images)\n\n#### 2. **Common Terminologies**\n\nFHIR uses standard coding systems:\n\n- **LOINC** - For procedure codes\n- **SNOMED CT** - For anatomical sites, findings\n- **RadLex** - Radiology-specific terminology\n- **DICOM** - For modality codes\n\n#### 3. **RESTful Operations**\n\nBasic FHIR operations:\n\n```python\n# Create: POST /Patient\n# Read: GET /Patient/123\n# Update: PUT /Patient/123\n# Delete: DELETE /Patient/123\n# Search: GET /Patient?name=Smith\n```\n\n## Resource\n\n### What is a FHIR Resource?\n\nA **Resource** is the fundamental unit of data in FHIR. Think of it as a standardized \"container\" or \"building block\" that holds specific types of healthcare information. Each resource represents a single concept in healthcare - like a patient, a medication, a lab result, or a radiology report.\n\n**Key Characteristics of Resources:**\n\n1. **Self-contained** - Each resource can stand alone with its own meaning\n2. **Identifiable** - Has a unique ID and can be referenced by other resources\n3. **Standardized structure** - Consistent format across all FHIR implementations\n4. **RESTful** - Can be created, read, updated, deleted via web APIs\n\n**Simple Analogy**\n\nThink of FHIR resources like **LEGO blocks**:\n- Each block (resource) has a specific shape and purpose\n- You can connect blocks together to build complex structures\n- Every block follows the same connection system\n- You can use blocks individually or combine them\n\n### Basic Structure of Any Resource\n\nEvery FHIR resource has these common elements:\n\n```json\n{\n    \"resourceType\": \"TypeName\",     // What kind of resource\n    \"id\": \"unique-identifier\",      // Unique ID\n    \"meta\": {...},                  // Metadata (version, last updated)\n    // Resource-specific content\n}\n```\n\n### Simple Example: Patient Resource\n\nLet me show you a minimal Patient resource:\n\n::: {#342d59a7 .cell execution_count=2}\n``` {.python .cell-code}\nimport json\nfrom datetime import datetime\n\n# Simplest possible Patient resource\nsimple_patient = {\n    \"resourceType\": \"Patient\",\n    \"id\": \"12345\"\n}\n\nprint(\"1. Minimal Patient Resource:\")\nprint(json.dumps(simple_patient, indent=2))\nprint(\"\\n\" + \"=\"*50 + \"\\n\")\n\n# More realistic Patient resource\nrealistic_patient = {\n    \"resourceType\": \"Patient\",\n    \"id\": \"12345\",\n    \"active\": True,\n    \"name\": [{\n        \"family\": \"Yamamoto\",\n        \"given\": [\"Hiroshi\"]\n    }],\n    \"gender\": \"male\",\n    \"birthDate\": \"1980-05-15\",\n    \"address\": [{\n        \"line\": [\"123 Sukhumvit Road\"],\n        \"city\": \"Bangkok\",\n        \"country\": \"Thailand\"\n    }]\n}\n\nprint(\"2. Realistic Patient Resource:\")\nprint(json.dumps(realistic_patient, indent=2))\nprint(\"\\n\" + \"=\"*50 + \"\\n\")\n\n# Example showing how resources reference each other\n# An Observation (lab result) that belongs to the patient above\nlab_result = {\n    \"resourceType\": \"Observation\",\n    \"id\": \"lab-001\",\n    \"status\": \"final\",\n    \"code\": {\n        \"text\": \"Blood Glucose\"\n    },\n    \"subject\": {\n        \"reference\": \"Patient/12345\",  # This links to our patient!\n        \"display\": \"Hiroshi Yamamoto\"\n    },\n    \"valueQuantity\": {\n        \"value\": 5.4,\n        \"unit\": \"mmol/L\"\n    },\n    \"effectiveDateTime\": \"2024-01-20T08:30:00+07:00\"\n}\n\nprint(\"3. Observation Resource (linked to Patient):\")\nprint(json.dumps(lab_result, indent=2))\nprint(\"\\n\" + \"=\"*50 + \"\\n\")\n\n# Radiology-specific example: A simple chest X-ray order\nxray_order = {\n    \"resourceType\": \"ServiceRequest\",\n    \"id\": \"xray-order-001\",\n    \"status\": \"active\",\n    \"intent\": \"order\",\n    \"code\": {\n        \"text\": \"Chest X-ray PA view\"\n    },\n    \"subject\": {\n        \"reference\": \"Patient/12345\"  # Same patient\n    },\n    \"authoredOn\": \"2024-01-20T09:00:00+07:00\",\n    \"requester\": {\n        \"display\": \"Dr. Smith\"\n    }\n}\n\nprint(\"4. ServiceRequest Resource (X-ray order):\")\nprint(json.dumps(xray_order, indent=2))\n\n# Demonstrate the relationship\nprint(\"\\n\" + \"=\"*50 + \"\\n\")\nprint(\"RELATIONSHIPS:\")\nprint(\"- The Patient resource (id: 12345) represents Mr. Hiroshi Yamamoto\")\nprint(\"- The Observation references this patient via 'Patient/12345'\")\nprint(\"- The ServiceRequest also references the same patient\")\nprint(\"- This creates a connected graph of healthcare data!\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n1. Minimal Patient Resource:\n{\n  \"resourceType\": \"Patient\",\n  \"id\": \"12345\"\n}\n\n==================================================\n\n2. Realistic Patient Resource:\n{\n  \"resourceType\": \"Patient\",\n  \"id\": \"12345\",\n  \"active\": true,\n  \"name\": [\n    {\n      \"family\": \"Yamamoto\",\n      \"given\": [\n        \"Hiroshi\"\n      ]\n    }\n  ],\n  \"gender\": \"male\",\n  \"birthDate\": \"1980-05-15\",\n  \"address\": [\n    {\n      \"line\": [\n        \"123 Sukhumvit Road\"\n      ],\n      \"city\": \"Bangkok\",\n      \"country\": \"Thailand\"\n    }\n  ]\n}\n\n==================================================\n\n3. Observation Resource (linked to Patient):\n{\n  \"resourceType\": \"Observation\",\n  \"id\": \"lab-001\",\n  \"status\": \"final\",\n  \"code\": {\n    \"text\": \"Blood Glucose\"\n  },\n  \"subject\": {\n    \"reference\": \"Patient/12345\",\n    \"display\": \"Hiroshi Yamamoto\"\n  },\n  \"valueQuantity\": {\n    \"value\": 5.4,\n    \"unit\": \"mmol/L\"\n  },\n  \"effectiveDateTime\": \"2024-01-20T08:30:00+07:00\"\n}\n\n==================================================\n\n4. ServiceRequest Resource (X-ray order):\n{\n  \"resourceType\": \"ServiceRequest\",\n  \"id\": \"xray-order-001\",\n  \"status\": \"active\",\n  \"intent\": \"order\",\n  \"code\": {\n    \"text\": \"Chest X-ray PA view\"\n  },\n  \"subject\": {\n    \"reference\": \"Patient/12345\"\n  },\n  \"authoredOn\": \"2024-01-20T09:00:00+07:00\",\n  \"requester\": {\n    \"display\": \"Dr. Smith\"\n  }\n}\n\n==================================================\n\nRELATIONSHIPS:\n- The Patient resource (id: 12345) represents Mr. Hiroshi Yamamoto\n- The Observation references this patient via 'Patient/12345'\n- The ServiceRequest also references the same patient\n- This creates a connected graph of healthcare data!\n```\n:::\n:::\n\n\n## Resource Types Most Relevant to Radiology\n\nHere are the main resources you'll work with in radiology:\n\n1. **Patient** - Who is being imaged\n2. **ServiceRequest** - The imaging order/request\n3. **ImagingStudy** - The actual DICOM study metadata\n4. **DiagnosticReport** - The radiology report\n5. **Observation** - Individual findings or measurements\n6. **Practitioner** - Radiologists, technicians, referring doctors\n\n### How Resources Connect\n\nResources don't exist in isolation. They reference each other to form a complete picture:\n\n```\nPatient <-- ServiceRequest (order)\n   ^              |\n   |              v\n   |        ImagingStudy (images)\n   |              |\n   |              v\n   +------- DiagnosticReport (report)\n                  |\n                  v\n            Observation(s) (findings)\n```\n\n### Why This Matters for Radiology Data Science\n\nUsing standardized resources helps you:\n\n1. **Extract consistent data** from different hospital systems\n2. **Build datasets** where a \"patient\" means the same thing everywhere\n3. **Link related information** (connect reports to images to findings)\n4. **Share AI results** in a standard format that any system can understand\n\nThe beauty of FHIR resources is that whether you're at Siriraj Hospital, Ramathibodi, or any hospital worldwide, a \"Patient\" resource has the same structure, making data science and interoperability much easier!\n\n",
    "supporting": [
      "HL7-FHIR-overview_files/figure-html"
    ],
    "filters": [],
    "includes": {}
  }
}